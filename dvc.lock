schema: '2.0'
stages:
  prep:
    cmd: python starter/prep_data.py
    deps:
    - path: data/census.csv
      hash: md5
      md5: 12c208530a5680c15ae19b34152286dd
      size: 3518606
    - path: starter/ml
      hash: md5
      md5: fd44de1474bec8527cdf0984d44ab600.dir
      size: 10338
      nfiles: 6
    - path: starter/prep_data.py
      hash: md5
      md5: 2488dae798ad2791f683725226ada1b5
      size: 1204
    outs:
    - path: data/preprocessors/encoder.pkl
      hash: md5
      md5: f871997acafae6843d7945e7abf41b92
      size: 4081
    - path: data/preprocessors/lb.pkl
      hash: md5
      md5: e0b3e5dc369ff21b833f4c9bfd11b813
      size: 447
    - path: data/preprocessors/scaler.pkl
      hash: md5
      md5: 5f7a89ab95bc3ce31f03d67309aa335b
      size: 1303
    - path: data/test/X.csv
      hash: md5
      md5: 9aedfa0a4f687ac2f41b6438b1ddb988
      size: 17426112
    - path: data/test/y.csv
      hash: md5
      md5: 50877d458b6fe36b85c3b463fbabb2b4
      size: 169312
    - path: data/train/X.csv
      hash: md5
      md5: 1b2989259ca75452860f21fbe30fb4b9
      size: 69658956
    - path: data/train/y.csv
      hash: md5
      md5: a514a49bae7256cc58f1973e71bacd94
      size: 676806
  prepare:
    cmd: python starter/prep_data.py
    deps:
    - path: data/census.csv
      hash: md5
      md5: 12c208530a5680c15ae19b34152286dd
      size: 3518606
    - path: starter/ml
      hash: md5
      md5: b0cbe3c92b1276f5d6d1726fd039982c.dir
      size: 17639
      nfiles: 10
    - path: starter/prep_data.py
      hash: md5
      md5: 74b4712096b0cbfc17b33fae6abfdd0b
      size: 1035
    outs:
    - path: data/preprocessors/encoder.pkl
      hash: md5
      md5: 97ba10f234252e0f017c51d96fe3dbed
      size: 4100
    - path: data/preprocessors/lb.pkl
      hash: md5
      md5: 9f5b95451a3be072c63974fbb549ca83
      size: 447
    - path: data/preprocessors/scaler.pkl
      hash: md5
      md5: 2944643d15e84b23b66dafe7d17e2e52
      size: 1287
    - path: data/test/X.csv
      hash: md5
      md5: c81b8bc2823f164f4523ebd8cc20a7b0
      size: 17586211
    - path: data/test/y.csv
      hash: md5
      md5: 8b40f9dfee1ced01f047296e4f50660d
      size: 169286
    - path: data/train/X.csv
      hash: md5
      md5: 1c7ff211687fa9bc504737a19229cc37
      size: 70312432
    - path: data/train/y.csv
      hash: md5
      md5: 11e51253b5d66c14822f9ce5d42b1899
      size: 676832
  train:
    cmd: python starter/train_model.py
    deps:
    - path: data/train/X.csv
      hash: md5
      md5: 1c7ff211687fa9bc504737a19229cc37
      size: 70312432
    - path: data/train/y.csv
      hash: md5
      md5: 11e51253b5d66c14822f9ce5d42b1899
      size: 676832
    - path: starter/train_model.py
      hash: md5
      md5: 60f489f17c925a97f99f634c3da8c016
      size: 500
    params:
      params.yaml:
        gridsearch: true
        model: RandomForestClassifier
        tuning:
          n_estimators:
          - 50
          - 100
          - 150
          max_features:
          - sqrt
          - log2
          - 0.75
          class_weight:
          - balanced
          max_depth:
          - 
          - 10
          - 20
    outs:
    - path: model/RandomForestClassifier.pkl
      hash: md5
      md5: bffb06eefb2ed0a492d0ddf43afb7d0a
      size: 42254985
  evaluate:
    cmd: python starter/eval_model.py
    deps:
    - path: data/test/X.csv
      hash: md5
      md5: c81b8bc2823f164f4523ebd8cc20a7b0
      size: 17586211
    - path: data/test/y.csv
      hash: md5
      md5: 8b40f9dfee1ced01f047296e4f50660d
      size: 169286
    - path: data/train/X.csv
      hash: md5
      md5: 1c7ff211687fa9bc504737a19229cc37
      size: 70312432
    - path: data/train/y.csv
      hash: md5
      md5: 11e51253b5d66c14822f9ce5d42b1899
      size: 676832
    - path: model/RandomForestClassifier.pkl
      hash: md5
      md5: bffb06eefb2ed0a492d0ddf43afb7d0a
      size: 42254985
    - path: starter/eval_model.py
      hash: md5
      md5: de7e1cde7c14daf40b995f2eb419e55f
      size: 833
    params:
      params.yaml:
        model: RandomForestClassifier
    outs:
    - path: model/eval.json
      hash: md5
      md5: 724f9cd622558098d4d9b2adf1f3d781
      size: 209
  report:
    cmd: python starter/build_report.py
    deps:
    - path: model/eval.json
      hash: md5
      md5: 724f9cd622558098d4d9b2adf1f3d781
      size: 209
    - path: starter/build_report.py
      hash: md5
      md5: 3a26e323fa27bc2f3d2db6398345981c
      size: 1452
    outs:
    - path: starter/reports/slice_report.html
      hash: md5
      md5: aaf6ea679120b8dab468cda2a25609ab
      size: 204706
    - path: starter/reports/templates/images
      hash: md5
      md5: 9512eb43a2d5f4772350dc2f752d0e0b.dir
      size: 513714
      nfiles: 8
